### üè¶ Bank Loan Simulator API - Pruebas
### Usa esta archivo con REST Client (VS Code Extension) o copia en Postman

@baseUrl = http://localhost:5094/api
@token = 

### ========================================
### üìù REGISTRO DE NUEVO USUARIO
### ========================================
POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "fullName": "Mar√≠a Garc√≠a",
  "email": "maria@example.com",
  "password": "123"
}

### ========================================
### üîë LOGIN COMO ADMINISTRADOR
### ========================================
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "admin@test.com",
  "password": "123"
}

### NOTA: Copia el "token" de la respuesta y p√©galo arriba en @token

### ========================================
### üîë LOGIN COMO USUARIO NORMAL
### ========================================
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "usuario@example.com",
  "password": "User123!"
}

### ========================================
### üë§ OBTENER INFO DEL USUARIO ACTUAL
### ========================================
GET {{baseUrl}}/auth/me
Authorization: Bearer {{token}}

### ========================================
### üí∞ CALCULAR CUOTA MENSUAL (sin crear pr√©stamo)
### ========================================
POST {{baseUrl}}/loans/calculate
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "amount": 10000,
  "interestRate": 12.5,
  "termInMonths": 24
}

### ========================================
### üìã CREAR NUEVA SOLICITUD DE PR√âSTAMO
### ========================================
POST {{baseUrl}}/loans
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "amount": 10000,
  "interestRate": 12.5,
  "termInMonths": 24
}

### ========================================
### üìã OBTENER MIS PR√âSTAMOS
### ========================================
GET {{baseUrl}}/loans/my-loans
Authorization: Bearer {{token}}

### ========================================
### üìã OBTENER TODOS LOS PR√âSTAMOS (Solo Admin)
### ========================================
GET {{baseUrl}}/loans
Authorization: Bearer {{token}}

### ========================================
### üìÑ OBTENER UN PR√âSTAMO POR ID
### Reemplaza {id} con un ID real de pr√©stamo
### ========================================
GET {{baseUrl}}/loans/{id}
Authorization: Bearer {{token}}

### ========================================
### ‚úÖ APROBAR UN PR√âSTAMO (Solo Admin)
### Reemplaza {id} con un ID real de pr√©stamo
### ========================================
PUT {{baseUrl}}/loans/{id}/review
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "status": 1,
  "adminComments": "Pr√©stamo aprobado. Excelente historial crediticio."
}

### Estados: 0 = Pending, 1 = Approved, 2 = Rejected

### ========================================
### ‚ùå RECHAZAR UN PR√âSTAMO (Solo Admin)
### Reemplaza {id} con un ID real de pr√©stamo
### ========================================
PUT {{baseUrl}}/loans/{id}/review
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "status": 2,
  "adminComments": "Pr√©stamo rechazado. Ingresos insuficientes."
}

### ========================================
### üóëÔ∏è ELIMINAR UN PR√âSTAMO
### Reemplaza {id} con un ID real de pr√©stamo
### ========================================
DELETE {{baseUrl}}/loans/{id}
Authorization: Bearer {{token}}

### ========================================
### üß™ FLUJO COMPLETO DE PRUEBA
### ========================================

### 1. Login como usuario normal
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "usuario@example.com",
  "password": "User123!"
}

###

### 2. Crear pr√©stamo de $15,000 a 36 meses
POST {{baseUrl}}/loans
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "amount": 15000,
  "interestRate": 10.5,
  "termInMonths": 36
}

###

### 3. Ver mis pr√©stamos
GET {{baseUrl}}/loans/my-loans
Authorization: Bearer {{token}}

###

### 4. Login como admin
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "admin@test.com",
  "password": "123"
}

###

### 5. Ver todos los pr√©stamos pendientes
GET {{baseUrl}}/loans
Authorization: Bearer {{token}}

###

### 6. Aprobar el pr√©stamo (usa el ID del paso 2)
PUT {{baseUrl}}/loans/{id-del-prestamo}/review
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "status": 1,
  "adminComments": "Aprobado por el administrador"
}

### ========================================
### üìä EJEMPLOS DE C√ÅLCULOS
### ========================================

### Pr√©stamo peque√±o: $5,000 a 12 meses al 8%
POST {{baseUrl}}/loans/calculate
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "amount": 5000,
  "interestRate": 8.0,
  "termInMonths": 12
}

###

### Pr√©stamo mediano: $25,000 a 60 meses al 15%
POST {{baseUrl}}/loans/calculate
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "amount": 25000,
  "interestRate": 15.0,
  "termInMonths": 60
}

###

### Pr√©stamo grande: $100,000 a 120 meses al 12%
POST {{baseUrl}}/loans/calculate
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "amount": 100000,
  "interestRate": 12.0,
  "termInMonths": 120
}
